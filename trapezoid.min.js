"use strict";function trapezoid(){var e={urlsToCache:[],processors:{GET:[]},processCache:function(n,t){n.waitUntil(caches.open(t).then(function(n){return n.addAll(e.urlsToCache)}))},doProcessor:function(e,n){return new Promise(function(t){var s={status:200,statusText:"OK",headers:{"Content-Type":"text/html"}},o={type:function(e){s["Content-Type"]=e},send:function(e){var n=new Response(e,s);t(n)}};e.fn(n,o)})},processFetch:function(n){function t(){for(var t=n.request.method,s=n.request.url.substr(self.location.href.lastIndexOf("/")),o=e.processors[t],r=null,c=0;c<o.length;c++)if(o[c].path===s){r=o[c];break}return r?r.cache?caches.match(n.request).then(function(e){return e}):r.offline?new Promise(function(t){fetch(n.request).then(function(e){t(e)}).catch(function(){e.doProcessor(r,n.request).then(function(e){t(e)})})}):e.doProcessor(r,n.request):fetch(n.request)}n.respondWith(t())},get:function(n,t){e.processors.GET.push({path:n,fn:t})},offline:function(n,t){e.processors.GET.push({path:n,fn:t,offline:!0})},useCache:function(n){e.processors.GET.push({path:n,cache:!0})},precache:function(n){Array.isArray(n)?e.urlsToCache=e.urlsToCache.concat(n):e.urlsToCache.push(n)},run:function(n){self.addEventListener("install",function(t){e.processCache(t,n)}),self.addEventListener("fetch",function(n){e.processFetch(n)})}};return e}
